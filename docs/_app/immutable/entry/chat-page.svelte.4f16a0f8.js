import{S as V,i as z,s as W,k as S,a as R,q as G,l as q,c as U,m as O,r as M,h as d,n as _,W as C,b as P,D as k,E as D,u as I,F as T,G as ne,H as F,O as ae,p as re,g as j,f as L,d as N,X as $,o as oe,y as ee,z as te,A as le,B as se,v as A,e as J,w as ue}from"../chunks/index.708f7bdc.js";import{p as ie}from"../chunks/stores.b1365436.js";function ce(s){let e;return{c(){e=S("h4")},l(l){e=q(l,"H4",{}),O(e).forEach(d)},m(l,t){P(l,e,t)},p:T,d(l){l&&d(e)}}}function fe(s){let e,l;return{c(){e=S("h4"),l=G(s[1])},l(t){e=q(t,"H4",{});var n=O(e);l=M(n,s[1]),n.forEach(d)},m(t,n){P(t,e,n),k(e,l)},p(t,n){n&2&&I(l,t[1])},d(t){t&&d(e)}}}function he(s){let e,l,t,n,u,c,p,m,o,y;function E(r,a){return r[1]!="emptyasdadbbusdbasudasbduah"?fe:ce}let f=E(s),i=f(s);return{c(){e=S("hr"),l=R(),t=S("hgroup"),n=S("h3"),u=G(s[0]),c=R(),i.c(),p=R(),m=S("hr"),this.h()},l(r){e=q(r,"HR",{class:!0}),l=U(r),t=q(r,"HGROUP",{class:!0});var a=O(t);n=q(a,"H3",{});var g=O(n);u=M(g,s[0]),g.forEach(d),c=U(a),i.l(a),a.forEach(d),p=U(r),m=q(r,"HR",{class:!0}),this.h()},h(){_(e,"class","svelte-1r8nlh7"),C(e,"selected",s[2]),_(t,"class","svelte-1r8nlh7"),_(m,"class","svelte-1r8nlh7"),C(m,"selected",s[2])},m(r,a){P(r,e,a),P(r,l,a),P(r,t,a),k(t,n),k(n,u),k(t,c),i.m(t,null),P(r,p,a),P(r,m,a),o||(y=[D(t,"click",s[3]),D(t,"keydown",s[4]),D(t,"mouseenter",s[5])],o=!0)},p(r,[a]){a&4&&C(e,"selected",r[2]),a&1&&I(u,r[0]),f===(f=E(r))&&i?i.p(r,a):(i.d(1),i=f(r),i&&(i.c(),i.m(t,null))),a&4&&C(m,"selected",r[2])},i:T,o:T,d(r){r&&d(e),r&&d(l),r&&d(t),i.d(),r&&d(p),r&&d(m),o=!1,ne(y)}}}function me(s,e,l){let{name:t}=e,{last:n}=e,{selected:u}=e;function c(o){F.call(this,s,o)}function p(o){F.call(this,s,o)}function m(o){F.call(this,s,o)}return s.$$set=o=>{"name"in o&&l(0,t=o.name),"last"in o&&l(1,n=o.last),"selected"in o&&l(2,u=o.selected)},[t,n,u,c,p,m]}class _e extends V{constructor(e){super(),z(this,e,me,he,W,{name:0,last:1,selected:2})}}function de(s){let e,l,t,n,u,c=s[3](s[1])+"",p;return{c(){e=S("hgroup"),l=S("h6"),t=G(s[0]),n=R(),u=S("p"),p=G(c),this.h()},l(m){e=q(m,"HGROUP",{class:!0});var o=O(e);l=q(o,"H6",{});var y=O(l);t=M(y,s[0]),y.forEach(d),n=U(o),u=q(o,"P",{class:!0});var E=O(u);p=M(E,c),E.forEach(d),o.forEach(d),this.h()},h(){_(u,"class","svelte-1nd80im"),_(e,"class","svelte-1nd80im"),C(e,"sender",s[2])},m(m,o){P(m,e,o),k(e,l),k(l,t),k(e,n),k(e,u),k(u,p)},p(m,[o]){o&1&&I(t,m[0]),o&2&&c!==(c=m[3](m[1])+"")&&I(p,c)},i:T,o:T,d(m){m&&d(e)}}}function ge(s,e,l){let t;ae(s,ie,o=>l(5,t=o));let{suid:n}=e,{text:u}=e,{timeStamp:c}=e,p=t.data.user.uid==n;const m=o=>new Date(o).toDateString();return s.$$set=o=>{"suid"in o&&l(4,n=o.suid),"text"in o&&l(0,u=o.text),"timeStamp"in o&&l(1,c=o.timeStamp)},[u,c,p,m,n]}class pe extends V{constructor(e){super(),z(this,e,ge,de,W,{suid:4,text:0,timeStamp:1})}}function K(s,e,l){const t=s.slice();return t[10]=e[l],t}function Q(s,e,l){const t=s.slice();return t[13]=e[l],t}function Y(s){let e,l;function t(){return s[8](s[13])}function n(){return s[9](s[13])}return e=new _e({props:{name:s[13].fname.concat(" ",s[13].lname),last:s[13].last??"No messages sent yet",selected:s[2]==s[13].uid}}),e.$on("mouseenter",t),e.$on("click",n),{c(){ee(e.$$.fragment)},l(u){te(e.$$.fragment,u)},m(u,c){le(e,u,c),l=!0},p(u,c){s=u;const p={};c&4&&(p.selected=s[2]==s[13].uid),e.$set(p)},i(u){l||(j(e.$$.fragment,u),l=!0)},o(u){N(e.$$.fragment,u),l=!1},d(u){se(e,u)}}}function Z(s){let e,l,t,n,u,c,p,m,o,y,E=s[5],f=[];for(let r=0;r<E.length;r+=1)f[r]=x(K(s,E,r));const i=r=>N(f[r],1,1,()=>{f[r]=null});return{c(){e=S("form"),l=S("input"),t=R(),n=S("input"),u=R(),c=S("button"),p=G("Send"),m=R(),o=S("scroll");for(let r=0;r<f.length;r+=1)f[r].c();this.h()},l(r){e=q(r,"FORM",{method:!0,action:!0,class:!0});var a=O(e);l=q(a,"INPUT",{id:!0,name:!0,placeholder:!0,class:!0}),t=U(a),n=q(a,"INPUT",{type:!0,name:!0,class:!0}),u=U(a),c=q(a,"BUTTON",{type:!0,class:!0});var g=O(c);p=M(g,"Send"),g.forEach(d),a.forEach(d),m=U(r),o=q(r,"SCROLL",{class:!0});var h=O(o);for(let v=0;v<f.length;v+=1)f[v].l(h);h.forEach(d),this.h()},h(){_(l,"id","message"),_(l,"name","message"),_(l,"placeholder","Send message..."),_(l,"class","svelte-1j0g7qg"),_(n,"type","hidden"),_(n,"name","ruid"),n.value=s[2],_(n,"class","svelte-1j0g7qg"),_(c,"type","submit"),_(c,"class","svelte-1j0g7qg"),_(e,"method","POST"),_(e,"action","?/sendMessage"),_(e,"class","svelte-1j0g7qg"),_(o,"class","svelte-1j0g7qg")},m(r,a){P(r,e,a),k(e,l),k(e,t),k(e,n),k(e,u),k(e,c),k(c,p),P(r,m,a),P(r,o,a);for(let g=0;g<f.length;g+=1)f[g]&&f[g].m(o,null);y=!0},p(r,a){if((!y||a&4)&&(n.value=r[2]),a&32){E=r[5];let g;for(g=0;g<E.length;g+=1){const h=K(r,E,g);f[g]?(f[g].p(h,a),j(f[g],1)):(f[g]=x(h),f[g].c(),j(f[g],1),f[g].m(o,null))}for(A(),g=E.length;g<f.length;g+=1)i(g);L()}},i(r){if(!y){for(let a=0;a<E.length;a+=1)j(f[a]);y=!0}},o(r){f=f.filter(Boolean);for(let a=0;a<f.length;a+=1)N(f[a]);y=!1},d(r){r&&d(e),r&&d(m),r&&d(o),$(f,r)}}}function ve(s){let e,l;return e=new pe({props:{suid:s[10].suid,text:s[10].text,timeStamp:s[10].timeStamp}}),{c(){ee(e.$$.fragment)},l(t){te(e.$$.fragment,t)},m(t,n){le(e,t,n),l=!0},p:T,i(t){l||(j(e.$$.fragment,t),l=!0)},o(t){N(e.$$.fragment,t),l=!1},d(t){se(e,t)}}}function x(s){let e,l,t=s[10].text!="emptyasdadbbusdbasudasbduah"&&ve(s);return{c(){t&&t.c(),e=J()},l(n){t&&t.l(n),e=J()},m(n,u){t&&t.m(n,u),P(n,e,u),l=!0},p(n,u){n[10].text!="emptyasdadbbusdbasudasbduah"&&t.p(n,u)},i(n){l||(j(t),l=!0)},o(n){N(t),l=!1},d(n){t&&t.d(n),n&&d(e)}}}function be(s){var g;let e,l,t,n,u,c,p,m,o,y,E,f=s[4],i=[];for(let h=0;h<f.length;h+=1)i[h]=Y(Q(s,f,h));const r=h=>N(i[h],1,1,()=>{i[h]=null});let a=((g=s[0])==null?void 0:g.convo)&&Z(s);return{c(){e=S("form"),l=S("input"),t=R(),n=S("main"),u=S("vgroup"),c=S("hgroup");for(let h=0;h<i.length;h+=1)i[h].c();p=R(),m=S("vline"),o=R(),y=S("hgroup"),a&&a.c(),this.h()},l(h){e=q(h,"FORM",{style:!0,id:!0,method:!0,action:!0,class:!0});var v=O(e);l=q(v,"INPUT",{type:!0,name:!0,id:!0,class:!0}),v.forEach(d),t=U(h),n=q(h,"MAIN",{class:!0});var H=O(n);u=q(H,"VGROUP",{class:!0});var b=O(u);c=q(b,"HGROUP",{class:!0});var w=O(c);for(let B=0;B<i.length;B+=1)i[B].l(w);w.forEach(d),p=U(b),m=q(b,"VLINE",{class:!0}),O(m).forEach(d),o=U(b),y=q(b,"HGROUP",{class:!0});var X=O(y);a&&a.l(X),X.forEach(d),b.forEach(d),H.forEach(d),this.h()},h(){_(l,"type","hidden"),_(l,"name","selectChat"),_(l,"id","selectChat"),l.value=s[3],_(l,"class","svelte-1j0g7qg"),re(e,"display","none"),_(e,"id","select"),_(e,"method","POST"),_(e,"action","?/selectChat"),_(e,"class","svelte-1j0g7qg"),_(c,"class","svelte-1j0g7qg"),_(m,"class","svelte-1j0g7qg"),_(y,"class","svelte-1j0g7qg"),_(u,"class","svelte-1j0g7qg"),_(n,"class","container-fluid")},m(h,v){P(h,e,v),k(e,l),s[7](e),P(h,t,v),P(h,n,v),k(n,u),k(u,c);for(let H=0;H<i.length;H+=1)i[H]&&i[H].m(c,null);k(u,p),k(u,m),k(u,o),k(u,y),a&&a.m(y,null),E=!0},p(h,[v]){var H;if((!E||v&8)&&(l.value=h[3]),v&30){f=h[4];let b;for(b=0;b<f.length;b+=1){const w=Q(h,f,b);i[b]?(i[b].p(w,v),j(i[b],1)):(i[b]=Y(w),i[b].c(),j(i[b],1),i[b].m(c,null))}for(A(),b=f.length;b<i.length;b+=1)r(b);L()}(H=h[0])!=null&&H.convo?a?(a.p(h,v),v&1&&j(a,1)):(a=Z(h),a.c(),j(a,1),a.m(y,null)):a&&(A(),N(a,1,1,()=>{a=null}),L())},i(h){if(!E){for(let v=0;v<f.length;v+=1)j(i[v]);j(a),E=!0}},o(h){i=i.filter(Boolean);for(let v=0;v<i.length;v+=1)N(i[v]);N(a),E=!1},d(h){h&&d(e),s[7](null),h&&d(t),h&&d(n),$(i,h),a&&a.d()}}}function ke(s,e,l){let{data:t}=e,{form:n}=e,u=t.contacts,c,p=(n==null?void 0:n.ruid)??-1,m=t.ruid??-1,o=(n==null?void 0:n.convo)??[];oe(()=>{t.ruid&&c.submit()});function y(i){ue[i?"unshift":"push"](()=>{c=i,l(1,c)})}const E=i=>l(3,m=i.uid),f=i=>{l(2,p=i.uid),c.submit()};return s.$$set=i=>{"data"in i&&l(6,t=i.data),"form"in i&&l(0,n=i.form)},[n,c,p,m,u,o,t,y,E,f]}class Se extends V{constructor(e){super(),z(this,e,ke,be,W,{data:6,form:0})}}export{Se as default};
